{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  key: '48120556-fdb679f2a2804b1816b5c1c88', // Ключ API\n};\n// Controls the group number\nimport { page } from '../main';\n\n// Функція для запиту API\nexport async function fetchImages(query) {\n  try {\n    const { data } = await axios.get('', {\n      params: {\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page, // Контролює групу, з якої завантажувати зображення\n      },\n    });\n\n    // return response.data.hits; // Повертаємо результати\n    return {\n      images: data.hits,\n      totalHits: data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching images:', error.message);\n    throw error;\n  }\n}","'use strict';\n\n// Функція для відображення галереї\nconst gallery = document.querySelector('.gallery');\n// console.log('gallery :>> ', gallery);\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      image => `\n        <li class = item>\n        <div class = conteiner-img>\n          <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </div>\n      </a>\n      <div class = image-info>\n          <p class = info-title>Likes <span class = info-value>${image.likes}</span></p>\n          <p class = info-title>Views <span class = info-value>${image.views}</span></p>\n          <p class = info-title>Comments <span class = info-value>${image.comments}</span></p>\n          <p class = info-title>Downloads <span class = info-value>${image.downloads}</span></p>\n      </div>\n        </li>\n      `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\n// console.log('form :>> ', form);\nconst input = document.querySelector('.search-input');\n// console.log('input :>> ', input);\nconst gallery = document.querySelector('.gallery');\n// console.log('gallery :>> ', gallery);\n\nconst loaderWrapper = document.querySelector('.loader-wrapper');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nexport let page = 1;\nlet query = '';\nlet loadedImagesCount = 0;\nfunction showLoader() {\n  loaderWrapper.style.display = 'flex';\n}\n\nfunction hideLoader() {\n  loaderWrapper.style.display = 'none';\n}\n\n// Ініціалізація SimpleLightbox\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = input.value.trim();\n\n  // Перевірка на порожнє поле\n  if (query === '') {\n    iziToast.show({\n      messageColor: '#fff',\n      color: '#EF4040',\n      position: 'topRight',\n      message: 'Please enter a search term!',\n    });\n\n    return;\n  }\n  // Очищення галереї перед новим пошуком\n  gallery.innerHTML = '';\n  page = 1;\n  loadedImagesCount = 0;\n  loadMoreBtn.style.display = 'none'; // Ховати кнопку перед новим пошуком\n\n  showLoader();\n\n  // Виконання запиту\n  try {\n    const { images, totalHits } = await fetchImages(query);\n    if (images.length === 0) {\n      iziToast.show({\n        messageColor: '#fff',\n        color: '#EF4040',\n        position: 'topRight',\n        maxWidth: 432,\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n    renderGallery(images);\n    // Оновлення SimpleLightbox після додавання нових зображень\n    lightbox.refresh();\n\n    // Показуємо кнопку завантаження, якщо є ще зображення\n    // if (images.length === 15) {\n    //   loadMoreBtn.style.display = 'block';\n    // }\n    loadedImagesCount += images.length;\n    if (images.length < totalHits) {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n\n// Завантаження наступної групи зображень\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1; // Збільшуємо номер сторінки\n\n  showLoader();\n  try {\n    const { images, totalHits } = await fetchImages(query);\n    renderGallery(images);\n    lightbox.refresh();\n\n    // loadedImagesCount += images.length;\n\n    // Плавне прокручування після додавання нових зображень\n    scrollToNextGroup();\n\n    // Якщо на наступній сторінці є ще зображення, залишаємо кнопку активною\n    if (images.length < 15 || loadedImagesCount >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.show({\n        messageColor: '#fff',\n        color: '#FFA500',\n        position: 'topRight',\n        maxWidth: 432,\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n\n// Функція для плавного прокручування\nfunction scrollToNextGroup() {\n  if (gallery.firstElementChild) {\n    const { height: cardHeight } =\n      gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth', // Плавне прокручування\n    });\n  }\n}"],"names":["axios","fetchImages","query","data","page","error","gallery","renderGallery","images","markup","image","form","input","loaderWrapper","loadMoreBtn","loadedImagesCount","showLoader","hideLoader","lightbox","SimpleLightbox","event","iziToast","totalHits","scrollToNextGroup","cardHeight"],"mappings":"owBAIAA,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,OAAS,CACtB,IAAK,oCACP,EAKO,eAAeC,EAAYC,EAAO,CACvC,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMH,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAME,CACP,CACP,CAAK,EAGD,MAAO,CACL,OAAQD,EAAK,KACb,UAAWA,EAAK,SACtB,CACG,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,EAAM,OAAO,EAC/CA,CACP,CACH,CC/BA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA;AAAA;AAAA,qBAGMA,EAAM,aAAa;AAAA,oBACpBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,iEAIOA,EAAM,KAAK;AAAA,iEACXA,EAAM,KAAK;AAAA,oEACRA,EAAM,QAAQ;AAAA,qEACbA,EAAM,SAAS;AAAA;AAAA;AAAA,OAI/E,EACA,KAAK,EAAE,EACVJ,EAAQ,mBAAmB,YAAaG,CAAM,CAChD,CCdA,MAAME,EAAO,SAAS,cAAc,cAAc,EAE5CC,EAAQ,SAAS,cAAc,eAAe,EAE9CN,EAAU,SAAS,cAAc,UAAU,EAG3CO,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAc,SAAS,cAAc,gBAAgB,EAEpD,IAAIV,EAAO,EACdF,EAAQ,GACRa,EAAoB,EACxB,SAASC,GAAa,CACpBH,EAAc,MAAM,QAAU,MAChC,CAEA,SAASI,GAAa,CACpBJ,EAAc,MAAM,QAAU,MAChC,CAGA,IAAIK,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDR,EAAK,iBAAiB,SAAU,MAAMS,GAAS,CAM7C,GALAA,EAAM,eAAc,EAEpBlB,EAAQU,EAAM,MAAM,OAGhBV,IAAU,GAAI,CAChBmB,EAAS,KAAK,CACZ,aAAc,OACd,MAAO,UACP,SAAU,WACV,QAAS,6BACf,CAAK,EAED,MACD,CAEDf,EAAQ,UAAY,GACpBF,EAAO,EACPW,EAAoB,EACpBD,EAAY,MAAM,QAAU,OAE5BE,IAGA,GAAI,CACF,KAAM,CAAE,OAAAR,EAAQ,UAAAc,CAAS,EAAK,MAAMrB,EAAYC,CAAK,EACrD,GAAIM,EAAO,SAAW,EAAG,CACvBa,EAAS,KAAK,CACZ,aAAc,OACd,MAAO,UACP,SAAU,WACV,SAAU,IACV,QACE,0EACV,CAAO,EACD,MACD,CACDd,EAAcC,CAAM,EAEpBU,EAAS,QAAO,EAMhBH,GAAqBP,EAAO,OACxBA,EAAO,OAASc,IAClBR,EAAY,MAAM,QAAU,QAE/B,OAAQT,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRY,GACD,CACH,CAAC,EAGDH,EAAY,iBAAiB,QAAS,SAAY,CAChDV,GAAQ,EAERY,IACA,GAAI,CACF,KAAM,CAAE,OAAAR,EAAQ,UAAAc,CAAS,EAAK,MAAMrB,EAAYC,CAAK,EACrDK,EAAcC,CAAM,EACpBU,EAAS,QAAO,EAKhBK,KAGIf,EAAO,OAAS,IAAMO,GAAqBO,KAC7CR,EAAY,MAAM,QAAU,OAC5BO,EAAS,KAAK,CACZ,aAAc,OACd,MAAO,UACP,SAAU,WACV,SAAU,IACV,QAAS,4DACjB,CAAO,EAEJ,OAAQhB,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRY,GACD,CACH,CAAC,EAGD,SAASM,GAAoB,CAC3B,GAAIjB,EAAQ,kBAAmB,CAC7B,KAAM,CAAE,OAAQkB,CAAY,EAC1BlB,EAAQ,kBAAkB,wBAC5B,OAAO,SAAS,CACd,IAAKkB,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH"}